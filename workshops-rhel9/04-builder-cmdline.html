<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: RHEL 9 Workshops</title>
    <link rel="canonical" href="https://redhat-scholars.github.io/course-template/workshops-rhel9/04-builder-cmdline.html">
    <link rel="prev" href="04-builder-blueprints.html">
    <link rel="next" href="04-builder-resources.html">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img src="../_/img/NewRHDFullLogo_4-color_white-wordmark.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="https://redhat-scholars.github.io/course-template">RHEL 9 Workshops</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/kubernetes-tutorial/" target="_blank">Kubernetes</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/istio-tutorial/" target="_blank">Istio</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/tekton-tutorial/" target="_blank">Tekton</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="workshops-rhel9" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html"></a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="00-README.html">0. README</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="01-installation.html">1. Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-installation-kickstart.html">1.1 Kickstart files</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-installation-repositories.html">1.2 Network repositories</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-installation-using-ks.html">1.3 Using Kickstart files</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-installation-resources.html">A.1 RHEL 9 Installation Resources</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="02-management.html">2. RHEL Management</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-management-install.html">2.1 Installing Cockpit</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-management-resources.html">A.1 Cockpit Resources</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="03-containers.html">3. Deploying Containers</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-containers-rpms.html">3.1 Installing container tools</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-containers-serverless.html">3.2 Deploying Serverless Containers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-containers-podman-autoupdate.html">3.3 Podman auto-update</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-containers-podman-rollback.html">3.4 Performing automatic rollbacks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-containers-resources.html">A.1 Container Resources</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="04-builder.html">4. Image Builder</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-builder-installing.html">4.1 Installing Image Builder</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-builder-blueprints.html">4.2 Blueprints</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="04-builder-cmdline.html">4.3 Using image builder from the command line</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-builder-resources.html">A.1 Image Builder Resources</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="05-security.html">5. Security</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="05-security-session-recording.html">5.1 Session Recording</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="05-security-resources.html">A.1 Security Resources</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="06-edge.html">6. Edge Computing with RHEL</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="06-edge-deployment.html">6.1 Deployment for RHEL in the Edge</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="06-edge-builder.html">6.2 Deployment for RHEL in the Edge using Image Builder</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="06-edge-insights.html">6.3 Deployment for RHEL in the Edge using Red Hat Insights</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="06-edge-resources.html">A.1 Edge Resources</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">RHEL 9 Workshops</a></li>
    <li><a href="04-builder.html">4. Image Builder</a></li>
    <li><a href="04-builder-cmdline.html">4.3 Using image builder from the command line</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/jadebustos/workshops-rhel9/edit/master/documentation/modules/ROOT/pages/04-builder-cmdline.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<div class="sect1">
<h2 id="buildercmdline"><a class="anchor" href="#buildercmdline"></a>Using image builder from the command line</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Image Builder can be used from the command line as well.</p>
</div>
<div class="paragraph">
<p>In the server where you deployed Image Builder:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">[root@rhel9 ~]# composer-cli --help
commandline tool for osbuild-composer
Usage:
  composer-cli [command]
Available Commands:
  blueprints  Manage blueprints
  completion  Generate the autocompletion script for the specified shell
  compose     Manage composes
  distros     Manage distributions
  doc         Generate manpage files
  help        Help about any command
  modules     Module related commands
  projects    Project related commands
  sources     Manage sources
  status      API server status
  version     Display the version and exit
Flags:
  -a, --api int         Server API Version to use (default 1)
  -h, --help            help for composer-cli
  -j, --json            Output the raw JSON response instead of the normal output
      --log string      Path to optional logfile
  -s, --socket string   Path to the server's socket file (default "/run/weldr/api.socket")
      --test int        Pass test mode to compose. 1=Mock compose with fail. 2=Mock compose with finished.
      --timeout int     Timeout to use for server communication. Set to 0 for no timeout (default 240)
Use "composer-cli [command] --help" for more information about a command.
[root@rhel9 ~]#</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can check the blueprints:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">[root@rhel9 ~]# composer-cli blueprints list
helloworld
[root@rhel9 ~]# composer-cli blueprints show helloworld
name = "helloworld"
description = "my first image"
version = "0.0.2"
modules = []
groups = []
distro = ""
<a id="packages"></a>
name = "podman"
version = "*"
<a id="packages"></a>
name = "container-selinux"
version = "*"
[customizations]
<a id="customizations.user"></a>
name = "operator"
description = "operator"
password = "r3dh4t1!"
key = "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCvPl4Aof9kRJPDgSKphNV4WAX7kNMcBVwsevuqCJphqmoLHS2onMiZRgcYJV6neKcFzB+kTOKhVzorC8uWNO5K+bTCeF0XkPeDrpCckatYVMtApWhvuqBTwER5x4i2mXAoEfJKNmgZkK3a6/bFdup9nXFi183ZAxaJJPXtkXZRA4dYiRDxKcWdcndDKGM+mFZD6R9en7Up38a4SZsYxCA/MX123ozYurLPniKXL2D4p+pioriCGVLX5BpiCiMrglaHX1XzBUmbHePWDxUoCzKCiD2LVDWZKK3McAXzzOOwMJeTq6GI0wA4FQlpAg9W+aCsCWyiySumS/PFTUGXwbnWI44YJN+H0ywlUWIeP5IsDMGqiYBcXPjdg96tYIY8ueEUbIRf13FLJQlsxCLBNiWwSB08JwJwAD06N3fiWAkJ/weQsNEQeLU7RSJxX0YlmZDr4r+MTnS02A2CcDaA0CfB4M93kJYQX8bk8S+dav7bis8CMsQ7Z+zGXvwrmPOtYRGTKqRPRvgJRj9xVuwuPZvuBkNj7zTLqQCdedC4u5xyc1byl1xcGDSs6Ef//KB4/AJfAf295N6/wYJzd7DZB8AdHuQiLEgAnUgDB8aSrHVjGlzzHZmpZdapVYSOPNBEqxR5ejF1ZQqDpCDV+bSanflUMpR2XIDiv0ayY7LTly9+Xw== <a href="mailto:jadebustos@euler.jadbp.lab">jadebustos@euler.jadbp.lab</a>\n"
groups = ["wheel"]</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can check the available images and the image type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">[root@rhel9 ~]# composer-cli compose list
043fc8bf-0c98-4d75-b6f7-07ca2868b8fb FINISHED rhel9edge 0.0.1 edge-commit
8a987451-c840-45b0-af12-3b3f575b5fd6 FINISHED helloworld 0.0.2 edge-commit
90387d4d-214f-464b-bb8c-2507165e16c3 FINISHED helloworld 0.0.2 image-installer
dd3bb1c4-5eff-4f50-8e55-d657284ec0cb FINISHED edgeimage 0.0.3 edge-commit
[root@rhel9 ~]#</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can see in the last column the type of the image. <strong>edge-commit</strong> is a tar image for an Edge deployment and <strong>image-installer</strong> is an ISO installer.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We can also get the image status:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">[root@rhel9 ~]# composer-cli compose status
dd3bb1c4-5eff-4f50-8e55-d657284ec0cb FINISHED Tue Jul 19 00:44:13 2022 edgeimage       0.0.3 edge-commit      2147483648
8a987451-c840-45b0-af12-3b3f575b5fd6 FINISHED Wed Aug 24 15:53:26 2022 helloworld      0.0.2 edge-commit      2147483648
90387d4d-214f-464b-bb8c-2507165e16c3 FINISHED Wed Aug 24 15:37:39 2022 helloworld      0.0.2 image-installer  2147483648
043fc8bf-0c98-4d75-b6f7-07ca2868b8fb FINISHED Thu Jul 7 11:34:25 2022 rhel9edge       0.0.1 edge-commit      2147483648
[root@rhel9 ~]#</code></pre>
</div>
</div>
<div class="paragraph">
<p>To download an image:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">[root@rhel9 ~]# composer-cli compose list
043fc8bf-0c98-4d75-b6f7-07ca2868b8fb FINISHED rhel9edge 0.0.1 edge-commit
8a987451-c840-45b0-af12-3b3f575b5fd6 FINISHED helloworld 0.0.2 edge-commit
90387d4d-214f-464b-bb8c-2507165e16c3 FINISHED helloworld 0.0.2 image-installer
b965ebd7-819e-4d48-a830-6feae88e7a9d FINISHED consum 0.0.3 edge-commit
dd3bb1c4-5eff-4f50-8e55-d657284ec0cb FINISHED edgeimage 0.0.3 edge-commit
e5c180f5-c7e2-46a0-989b-9be936f7e1bd FINISHED consum 0.0.2 edge-commit
[root@rhel9 ~]# composer-cli compose image 8a987451-c840-45b0-af12-3b3f575b5fd6
8a987451-c840-45b0-af12-3b3f575b5fd6-commit.tar
[root@rhel9 ~]# ls -lh
total 669M
-rw-------. 1 root root 669M ago 24 16:41 8a987451-c840-45b0-af12-3b3f575b5fd6-commit.tar
-rw-------. 1 root root  930 jul  6 09:25 anaconda-ks.cfg
[root@rhel9 ~]#</code></pre>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="04-builder-blueprints.html">4.2 Blueprints</a></span>
  <span class="next"><a href="04-builder-resources.html">A.1 Image Builder Resources</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../_/js/vendor/clipboard.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
